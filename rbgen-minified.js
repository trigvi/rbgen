function Rbgen(){this.apply=function(t){for(let e of document.querySelectorAll(".rbgen")){let r={width:e.getAttribute("data-rbgen-width"),height:e.getAttribute("data-rbgen-height"),backgroundColorHex:e.getAttribute("data-rbgen-bgcolor-hex"),tone:e.getAttribute("data-rbgen-tone"),shapes:e.getAttribute("data-rbgen-shapes"),shapesCount:e.getAttribute("data-rbgen-shapes-count"),shapesColorHex:e.getAttribute("data-rbgen-shapes-color-hex"),shapesMaximumOpacity:e.getAttribute("data-rbgen-shapes-max-opacity")},{backgroundColorHex:a,svgHtml:i}=this.generateSvgImageAsHtml(r),n=this.convertSvgHtmlImageToBackgroundUrl(i);e.setAttribute("data-rbgen-current-bgcolor-hex",a),e.setAttribute("data-rbgen-current-raw",btoa(i)),e.style.background="no-repeat black "+n,e.style.backgroundSize="cover"}"function"==typeof t&&t()},this.downloadImage=function(t){let e,r=document.getElementById(t),a=document.querySelector(t);if(r)e=r;else{if(!a)return;e=a}let i=e.getAttribute("data-rbgen-current-raw");if(!i)return;let n=atob(i),o=this.generateRandomString(10)+".svg",s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),s.setAttribute("download",o),s.style.display="none",document.body.appendChild(s),s.click(),s.remove()},this.generateSvgImageAsHtml=function(t){(t=t||{}).width&&t.height||(t.width=7680,t.height=4320),t.shapes||(t.shapes="circles"),t.shapesCount||(t.shapesCount=20),t.shapesColorHex||(t.shapesColorHex="#000000"),t.shapesMaximumOpacity||(t.shapesMaximumOpacity=.05),t.backgroundColorHex||(t.tone||(t.tone="pastel"),t.backgroundColorHex=this.generateRandomHexColorString(t.tone));let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("viewBox","0 0 "+t.width.toString()+" "+t.height.toString()),e.setAttribute("width",t.width),e.setAttribute("height",t.height);let r=t.height;t.height>t.width&&(r=t.width);let a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("width",t.width),a.setAttribute("height",t.height),a.setAttribute("style","fill: "+t.backgroundColorHex),e.appendChild(a);for(let i=1;i<=t.shapesCount;i++){let n=parseFloat(t.shapesMaximumOpacity)*Math.random();if("rectangles"===t.shapes){let o=Math.random()*(r/1.5),s=Math.random()*o,h=document.createElementNS("http://www.w3.org/2000/svg","rect");h.setAttribute("width",parseInt(o)),h.setAttribute("height",parseInt(s)),h.setAttribute("x",parseInt(t.width*Math.random())),h.setAttribute("y",parseInt(t.height*Math.random())),h.setAttribute("style","fill: "+t.shapesColorHex+"; opacity: "+n),e.appendChild(h)}else if("circles"===t.shapes){let g=Math.random()*(r/1.5),l=g/2,u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttribute("r",parseInt(l)),u.setAttribute("cx",parseInt(t.width*Math.random())),u.setAttribute("cy",parseInt(t.height*Math.random())),u.setAttribute("style","fill: "+t.shapesColorHex+"; opacity: "+n),e.appendChild(u)}}return{backgroundColorHex:t.backgroundColorHex,svgHtml:e.outerHTML}},this.convertSvgHtmlImageToBackgroundUrl=function(t){return"url('data:image/svg+xml;utf8,"+encodeURIComponent(t)+"')"},this.generateRandomHexColorString=function(t){let e,r,a;"pastel"===t?(e=360*Math.random(),r=80,a=90):"medium"===t?(e=360*Math.random(),r=30,a=50):"dark"===t&&(e=360*Math.random(),r=30,a=20);let i=this.HSLToRGB(e,r,a),n=this.RGBToHex(i[0],i[1],i[2]);return n},this.HSLToRGB=function(t,e,r){e/=100,r/=100;let a=(1-Math.abs(2*r-1))*e,i=a*(1-Math.abs(t/60%2-1)),n=r-a/2,o=0,s=0,h=0;return 0<=t&&t<60?(o=a,s=i,h=0):60<=t&&t<120?(o=i,s=a,h=0):120<=t&&t<180?(o=0,s=a,h=i):180<=t&&t<240?(o=0,s=i,h=a):240<=t&&t<300?(o=i,s=0,h=a):300<=t&&t<360&&(o=a,s=0,h=i),o=Math.round((o+n)*255),[o,s=Math.round((s+n)*255),h=Math.round((h+n)*255)]},this.RGBToHex=function(t,e,r){return t=t.toString(16),e=e.toString(16),r=r.toString(16),1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==r.length&&(r="0"+r),"#"+t+e+r},this.generateRandomString=function(t){let e="",r="0123456789abcdefghijklmnopqrstuvwxyz",a=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*a));return e}}

